(this["webpackJsonpyumeni-frontend"]=this["webpackJsonpyumeni-frontend"]||[]).push([[0],{117:function(e,t,r){},126:function(e,t,r){},127:function(e,t,r){},186:function(e,t,r){},341:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(82),o=r.n(c),s=(r(186),r(23)),i=r(24),u=r(20),p=r(25),d=r(26),l=(r(117),r(343)),h=r(174),f=r(175),j=r(73),b=r(177),y=r(2),v=r.n(y),O=r(31),C=r.n(O),m=r(70),g=r(160),x=r.n(g).a.create({headers:{"Content-Type":"application/json"}});function A(){return _.apply(this,arguments)}function _(){return(_=Object(m.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("https://opendata.resas-portal.go.jp/api/v1/prefectures");case 2:return t=e.sent,e.abrupt("return",t.data.result);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(m.a)(C.a.mark((function e(t){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("https://opendata.resas-portal.go.jp/api/v1/cities?prefCode="+t);case 2:return r=e.sent,e.abrupt("return",r.data.result);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=Object(m.a)(C.a.mark((function e(t){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("https://opendata.resas-portal.go.jp/api/v1/population/composition/perYear?prefCode="+t);case 2:return r=e.sent,e.abrupt("return",r.data.result.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(m.a)(C.a.mark((function e(t,r){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("https://opendata.resas-portal.go.jp/api/v1/population/composition/perYear?prefCode="+t+"&cityCode="+r);case 2:return a=e.sent,e.abrupt("return",a.data.result.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}x.interceptors.request.use((function(e){var t=localStorage.Auth;return e.headers.Authorization=t?"Basic ".concat(t):"",e})),x.defaults.headers.common={"X-API-KEY":"MYRr6MBVsb2ao9OJrS2OjiyoBnP02Slrgl721amA"};r(126);var w=r(7),M=function(e){Object(p.a)(r,e);var t=Object(d.a)(r);function r(e){var a;return Object(s.a)(this,r),(a=t.call(this,e)).state={added:!1,color:"#A8A878",count:0},a.pref=a.props.pref,a.mode=e.mode,a.loadData=e.loadData,a.change_display=a.change_display.bind(Object(u.a)(a)),a.show_population=a.show_population.bind(Object(u.a)(a)),a}return Object(i.a)(r,[{key:"change_display",value:function(e){e.preventDefault(),this.props.onPrefectureSelect(this.pref.prefCode,this.pref.prefName)}},{key:"show_population",value:function(e){var t=this;e.preventDefault(),0==this.state.added?function(e){return D.apply(this,arguments)}(this.pref.prefCode).then((function(e){t.props.loadData(e,t.pref.prefCode+"_"),t.setState({added:!0})})).catch((function(e){return t.props.createAlert(e)})):this.setState({added:!1})}},{key:"render",value:function(){var e=this.props.currentCode,t=void 0!=e&&e.toString().startsWith(this.pref.prefCode+"_")?"#4924A1":"#A8A878";return Object(w.jsxs)("div",{children:[Object(w.jsx)("table",{style:{width:"100%",color:"white",backgroundColor:t,borderRadius:"25px",border:"5px solid #6D6D4E"},children:Object(w.jsx)("tbody",{children:Object(w.jsx)("tr",{children:Object(w.jsx)("td",{align:"center",onClick:2==this.mode?this.change_display.bind(this):this.show_population.bind(this),style:{borderRadius:"25px"},className:"prefBox",children:this.pref.prefName})})})}),Object(w.jsx)("p",{})]})}}],[{key:"propTypes",get:function(){return{pref:v.a.any,mode:v.a.any,currentCode:v.a.any,loadData:v.a.func,createAlert:v.a.func,onPrefectureSelect:v.a.func}}}]),r}(a.Component),N=function(e){Object(p.a)(r,e);var t=Object(d.a)(r);function r(e){var a;return Object(s.a)(this,r),(a=t.call(this,e)).state={prefecture_list:[]},a}return Object(i.a)(r,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,A().then((function(t){e.setState({prefecture_list:t})})).catch((function(t){return e.createAlert(t)}))}},{key:"render",value:function(){var e=this;return Object(w.jsx)("div",{className:"prefecture_list",children:this.state.prefecture_list.map((function(t){return Object(w.jsx)(M,{pref:t,loadData:e.props.loadData,createAlert:e.props.createAlert,currentCode:e.props.currentCode},t.prefCode+"_"+e.props.currentCode)}))})}}],[{key:"propTypes",get:function(){return{pref:v.a.any,currentCode:v.a.any,loadData:v.a.func,createAlert:v.a.func,onPrefectureSelect:v.a.func}}}]),r}(a.Component),P=function(e){Object(p.a)(r,e);var t=Object(d.a)(r);function r(e){var a;return Object(s.a)(this,r),(a=t.call(this,e)).state={added:!1,color:"#A8A878"},a.show_population=a.show_population.bind(Object(u.a)(a)),a}return Object(i.a)(r,[{key:"show_population",value:function(e){var t=this;e.preventDefault(),0==this.state.added?function(e,t){return S.apply(this,arguments)}(this.props.city.prefCode,this.props.city.cityCode).then((function(e){t.props.loadData(e,t.props.city.prefCode+"_"+t.props.city.cityCode),t.setState({added:!0})})).catch((function(e){return t.props.createAlert(e)})):this.setState({added:!1})}},{key:"render",value:function(){var e=this.props.currentCode,t=this.props.city.prefCode+"_"+this.props.city.cityCode,r=void 0!=e&&e==t?"#4924A1":"#A8A878";return Object(w.jsxs)("div",{style:{borderRadius:"25px",border:"5px solid #6D6D4E",backgroundColor:r,color:"white"},children:[Object(w.jsx)("p",{}),Object(w.jsx)("div",{onClick:this.show_population.bind(this),align:"center",className:"cityBox",children:this.props.city.cityName}),Object(w.jsx)("p",{})]})}}],[{key:"propTypes",get:function(){return{city:v.a.any,currentCode:v.a.any,loadData:v.a.func,createAlert:v.a.func}}}]),r}(a.Component),T=(r(127),function(e){Object(p.a)(r,e);var t=Object(d.a)(r);function r(e){var a;return Object(s.a)(this,r),(a=t.call(this,e)).state={cities:[]},a}return Object(i.a)(r,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,function(e){return k.apply(this,arguments)}(this.props.prefCode).then((function(t){e.setState({cities:t})})).catch((function(t){return e.props.createAlert(t)}))}},{key:"render",value:function(){var e=this;return Object(w.jsxs)("div",{children:[Object(w.jsx)("div",{className:"header",children:this.props.prefName}),Object(w.jsx)("div",{className:"cityList",children:this.state.cities.map((function(t){return Object(w.jsx)(P,{city:t,loadData:e.props.loadData,createAlert:e.props.createAlert,currentCode:e.props.currentCode},t.prefCode+"_"+t.cityCode+"_"+e.props.currentCode)}))})]})}}],[{key:"propTypes",get:function(){return{prefName:v.a.any,prefCode:v.a.any,currentCode:v.a.any,loadData:v.a.func,createAlert:v.a.func}}}]),r}(a.Component)),B=function(e){Object(p.a)(r,e);var t=Object(d.a)(r);function r(e){var a;return Object(s.a)(this,r),(a=t.call(this,e)).state={prefecture_list:[],rendered:[],selected:void 0,count:{},prefName:void 0},a.onPrefectureSelect=a.onPrefectureSelect.bind(Object(u.a)(a)),a}return Object(i.a)(r,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,A().then((function(t){e.setState({prefecture_list:t})})).catch((function(t){return e.createAlert(t)}))}},{key:"onPrefectureSelect",value:function(e,t){var r=this.state.rendered,a=this.state.count;-1==r.indexOf(e)&&(r.push(e),a[e]=0),this.setState({rendered:r,selected:e,prefName:t})}},{key:"render",value:function(){var e=this;return Object(w.jsxs)("div",{id:"city_page",children:[Object(w.jsx)("div",{id:"city_page_left",children:this.state.prefecture_list.map((function(t){return Object(w.jsx)(M,{currentCode:e.props.currentCode,pref:t,onPrefectureSelect:e.onPrefectureSelect,mode:2},"2_"+t.prefCode)}))}),Object(w.jsx)("div",{id:"city_page_right",children:this.state.rendered.map((function(t){return Object(w.jsx)("div",{style:{display:e.state.selected==t?"":"none"},children:Object(w.jsx)(T,{prefCode:t,loadData:e.props.loadData,createAlert:e.props.createAlert,currentCode:e.props.currentCode,prefName:e.state.prefName})},e.state.selected+"_city_"+t)}))})]})}}],[{key:"propTypes",get:function(){return{currentCode:v.a.any,loadData:v.a.func,createAlert:v.a.func}}}]),r}(a.Component),E=function(e){Object(p.a)(r,e);var t=Object(d.a)(r);function r(e){var a;return Object(s.a)(this,r),(a=t.call(this,e)).state={graphMode:1,data:[],keyList:["\u7dcf\u4eba\u53e3","\u5e74\u5c11\u4eba\u53e3","\u751f\u7523\u5e74\u9f62\u4eba\u53e3","\u8001\u5e74\u4eba\u53e3"],color:{"\u7dcf\u4eba\u53e3":"#6D5E9C","\u5e74\u5c11\u4eba\u53e3":"#2C2C2C","\u751f\u7523\u5e74\u9f62\u4eba\u53e3":"#C03028","\u8001\u5e74\u4eba\u53e3":"#4E8234"},currentCode:void 0},a.loadData=a.loadData.bind(Object(u.a)(a)),a.changeMode=a.changeMode.bind(Object(u.a)(a)),a.createAlert=a.createAlert.bind(Object(u.a)(a)),a.closeAlert=a.closeAlert.bind(Object(u.a)(a)),a}return Object(i.a)(r,[{key:"loadData",value:function(e,t){for(var r=[],a=0;a<e[0].data.length;a++)r.push({year:e[0].data[a].year});for(var n=0;n<e.length;n++)for(var c=e[n].data,o=0;o<c.length;o++)for(var s=0;s<r.length;s++)c[o].year==r[s].year&&(r[s][e[n].label]=c[o].value);this.setState({data:r,currentCode:t})}},{key:"changeMode",value:function(){var e=1;1==this.state.graphMode&&(e=2),this.setState({graphMode:e,currentCode:void 0})}},{key:"createAlert",value:function(e){this.setState({alert:e})}},{key:"closeAlert",value:function(){this.setState({alert:void 0})}},{key:"render",value:function(){var e=this;return Object(w.jsxs)("div",{style:{marginLeft:"1em",width:"80%"},children:[void 0==this.state.alert?Object(w.jsx)("div",{}):Object(w.jsx)(w.Fragment,{}),Object(w.jsxs)(l.a,{width:1200,height:600,data:this.state.data,margin:{top:30,right:30,left:60,bottom:0},children:[Object(w.jsx)(h.a,{dataKey:"year"}),Object(w.jsx)(f.a,{}),Object(w.jsx)(j.a,{}),this.state.keyList.map((function(t){return Object(w.jsx)(b.a,{type:"monotone",dataKey:t,stroke:e.state.color[t]},t)}))]}),Object(w.jsx)("p",{}),Object(w.jsx)("div",{className:"switch",onClick:this.changeMode,children:1==this.state.graphMode?"Prefecture":"City"}),Object(w.jsx)("p",{}),1==this.state.graphMode?Object(w.jsx)(N,{mode:this.state.graphMode,loadData:this.loadData,createAlert:this.createAlert,currentCode:this.state.currentCode}):Object(w.jsx)(B,{loadData:this.loadData,createAlert:this.createAlert,currentCode:this.state.currentCode})]})}}]),r}(a.Component),L=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,348)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,c=t.getLCP,o=t.getTTFB;r(e),a(e),n(e),c(e),o(e)}))};o.a.render(Object(w.jsx)(n.a.StrictMode,{children:Object(w.jsx)(E,{})}),document.getElementById("root")),L()}},[[341,1,2]]]);
//# sourceMappingURL=main.9d8100e3.chunk.js.map