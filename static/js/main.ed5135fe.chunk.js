(this["webpackJsonpyumeni-frontend"]=this["webpackJsonpyumeni-frontend"]||[]).push([[0],{119:function(e,t,a){},128:function(e,t,a){},129:function(e,t,a){},189:function(e,t,a){},346:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(64),c=a.n(o),i=(a(189),a(23)),s=a(24),u=a(18),p=a(25),d=a(26),l=(a(119),a(348)),h=a(349),f=a(177),j=a(178),y=a(76),b=a(180),v=a(2),O=a.n(v),g=a(31),C=a.n(g),m=a(73),x=a(162),k=a.n(x).a.create({headers:{"Content-Type":"application/json"}});function A(){return D.apply(this,arguments)}function D(){return(D=Object(m.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.get("https://opendata.resas-portal.go.jp/api/v1/prefectures");case 2:return t=e.sent,e.abrupt("return",t.data.result);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(m.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.get("https://opendata.resas-portal.go.jp/api/v1/cities?prefCode="+t);case 2:return a=e.sent,e.abrupt("return",a.data.result);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(m.a)(C.a.mark((function e(t){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.get("https://opendata.resas-portal.go.jp/api/v1/population/composition/perYear?prefCode="+t);case 2:return a=e.sent,e.abrupt("return",a.data.result.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(m.a)(C.a.mark((function e(t,a){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.get("https://opendata.resas-portal.go.jp/api/v1/population/composition/perYear?prefCode="+t+"&cityCode="+a);case 2:return r=e.sent,e.abrupt("return",r.data.result.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}k.interceptors.request.use((function(e){var t=localStorage.Auth;return e.headers.Authorization=t?"Basic ".concat(t):"",e})),k.defaults.headers.common={"X-API-KEY":"MYRr6MBVsb2ao9OJrS2OjiyoBnP02Slrgl721amA"};a(128);var S=a(7),M=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={added:!1,color:"#A8A878",count:0},r.pref=r.props.pref,r.mode=e.mode,r.loadData=e.loadData,r.change_display=r.change_display.bind(Object(u.a)(r)),r.show_population=r.show_population.bind(Object(u.a)(r)),r}return Object(s.a)(a,[{key:"change_display",value:function(e){e.preventDefault(),this.props.onPrefectureSelect(this.pref.prefCode,this.pref.prefName)}},{key:"show_population",value:function(e){var t=this;e.preventDefault(),0==this.state.added?function(e){return w.apply(this,arguments)}(this.pref.prefCode).then((function(e){t.props.loadData(e,t.pref.prefCode+"_"),t.setState({added:!0})})).catch((function(e){return t.props.createAlert(e)})):this.setState({added:!1})}},{key:"render",value:function(){var e=this.props.currentCode,t=void 0!=e&&e.toString().startsWith(this.pref.prefCode+"_")?"#4924A1":"#A8A878";return Object(S.jsxs)("div",{children:[Object(S.jsx)("table",{style:{width:"100%",color:"white",backgroundColor:t,borderRadius:"25px",border:"5px solid #6D6D4E"},children:Object(S.jsx)("tbody",{children:Object(S.jsx)("tr",{children:Object(S.jsx)("td",{align:"center",onClick:2==this.mode?this.change_display.bind(this):this.show_population.bind(this),style:{borderRadius:"25px"},className:"prefBox",children:this.pref.prefName})})})}),Object(S.jsx)("p",{})]})}}],[{key:"propTypes",get:function(){return{pref:O.a.any,mode:O.a.any,currentCode:O.a.any,loadData:O.a.func,createAlert:O.a.func,onPrefectureSelect:O.a.func}}}]),a}(r.Component),N=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={prefecture_list:[]},r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,A().then((function(t){e.setState({prefecture_list:t})})).catch((function(t){return e.createAlert(t)}))}},{key:"render",value:function(){var e=this;return Object(S.jsx)("div",{className:"prefecture_list",children:this.state.prefecture_list.map((function(t){return Object(S.jsx)(M,{pref:t,loadData:e.props.loadData,createAlert:e.props.createAlert,currentCode:e.props.currentCode},t.prefCode+"_"+e.props.currentCode)}))})}}],[{key:"propTypes",get:function(){return{pref:O.a.any,currentCode:O.a.any,loadData:O.a.func,createAlert:O.a.func,onPrefectureSelect:O.a.func}}}]),a}(r.Component),T=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={added:!1,color:"#A8A878"},r.show_population=r.show_population.bind(Object(u.a)(r)),r}return Object(s.a)(a,[{key:"show_population",value:function(e){var t=this;e.preventDefault(),0==this.state.added?function(e,t){return P.apply(this,arguments)}(this.props.city.prefCode,this.props.city.cityCode).then((function(e){t.props.loadData(e,t.props.city.prefCode+"_"+t.props.city.cityCode),t.setState({added:!0})})).catch((function(e){return t.props.createAlert(e)})):this.setState({added:!1})}},{key:"render",value:function(){var e=this.props.currentCode,t=this.props.city.prefCode+"_"+this.props.city.cityCode,a=void 0!=e&&e==t?"#4924A1":"#A8A878";return Object(S.jsxs)("div",{style:{borderRadius:"25px",border:"5px solid #6D6D4E",backgroundColor:a,color:"white"},children:[Object(S.jsx)("p",{}),Object(S.jsx)("div",{onClick:this.show_population,align:"center",className:"cityBox",children:this.props.city.cityName}),Object(S.jsx)("p",{})]})}}],[{key:"propTypes",get:function(){return{city:O.a.any,currentCode:O.a.any,loadData:O.a.func,createAlert:O.a.func}}}]),a}(r.Component),B=(a(129),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={cities:[]},r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,function(e){return _.apply(this,arguments)}(this.props.prefCode).then((function(t){e.setState({cities:t})})).catch((function(t){return e.props.createAlert(t)}))}},{key:"render",value:function(){var e=this;return Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{className:"header",children:this.props.prefName}),Object(S.jsx)("div",{className:"cityList",children:this.state.cities.map((function(t){return Object(S.jsx)(T,{city:t,loadData:e.props.loadData,createAlert:e.props.createAlert,currentCode:e.props.currentCode},t.prefCode+"_"+t.cityCode+"_"+e.props.currentCode)}))})]})}}],[{key:"propTypes",get:function(){return{prefName:O.a.any,prefCode:O.a.any,currentCode:O.a.any,loadData:O.a.func,createAlert:O.a.func}}}]),a}(r.Component)),E=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={prefecture_list:[],rendered:[],selected:void 0,count:{},prefName:void 0},r.onPrefectureSelect=r.onPrefectureSelect.bind(Object(u.a)(r)),r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,A().then((function(t){e.setState({prefecture_list:t})})).catch((function(t){return e.createAlert(t)}))}},{key:"onPrefectureSelect",value:function(e,t){var a=this.state.rendered,r=this.state.count;-1==a.indexOf(e)&&(a.push(e),r[e]=0),this.setState({rendered:a,selected:e,prefName:t})}},{key:"render",value:function(){var e=this;return Object(S.jsxs)("div",{id:"city_page",children:[Object(S.jsx)("div",{id:"city_page_left",children:this.state.prefecture_list.map((function(t){return Object(S.jsx)(M,{currentCode:e.props.currentCode,pref:t,onPrefectureSelect:e.onPrefectureSelect,mode:2},"2_"+t.prefCode)}))}),Object(S.jsx)("div",{id:"city_page_right",children:this.state.rendered.map((function(t){return Object(S.jsx)("div",{style:{display:e.state.selected==t?"":"none"},children:Object(S.jsx)(B,{prefCode:t,loadData:e.props.loadData,createAlert:e.props.createAlert,currentCode:e.props.currentCode,prefName:e.state.prefName})},e.state.selected+"_city_"+t)}))})]})}}],[{key:"propTypes",get:function(){return{currentCode:O.a.any,loadData:O.a.func,createAlert:O.a.func}}}]),a}(r.Component),L=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={graphMode:1,data:[],keyList:["\u7dcf\u4eba\u53e3","\u5e74\u5c11\u4eba\u53e3","\u751f\u7523\u5e74\u9f62\u4eba\u53e3","\u8001\u5e74\u4eba\u53e3"],color:{"\u7dcf\u4eba\u53e3":"#6D5E9C","\u5e74\u5c11\u4eba\u53e3":"#2C2C2C","\u751f\u7523\u5e74\u9f62\u4eba\u53e3":"#7D1F1A","\u8001\u5e74\u4eba\u53e3":"#4E8234"},display:{"\u7dcf\u4eba\u53e3":"","\u5e74\u5c11\u4eba\u53e3":"","\u751f\u7523\u5e74\u9f62\u4eba\u53e3":"","\u8001\u5e74\u4eba\u53e3":""},currentCode:void 0},r.loadData=r.loadData.bind(Object(u.a)(r)),r.changeMode=r.changeMode.bind(Object(u.a)(r)),r.createAlert=r.createAlert.bind(Object(u.a)(r)),r.closeAlert=r.closeAlert.bind(Object(u.a)(r)),r.turnOff=r.turnOff.bind(Object(u.a)(r)),r.totalPopulation=r.totalPopulation.bind(Object(u.a)(r)),r.youngPopulation=r.youngPopulation.bind(Object(u.a)(r)),r.workingAge=r.workingAge.bind(Object(u.a)(r)),r.oldPopulation=r.oldPopulation.bind(Object(u.a)(r)),r}return Object(s.a)(a,[{key:"loadData",value:function(e,t){for(var a=[],r=0;r<e[0].data.length;r++)a.push({year:e[0].data[r].year});for(var n=0;n<e.length;n++)for(var o=e[n].data,c=0;c<o.length;c++)for(var i=0;i<a.length;i++)o[c].year==a[i].year&&(a[i][e[n].label]=o[c].value);this.setState({data:a,currentCode:t})}},{key:"changeMode",value:function(){var e=1;1==this.state.graphMode&&(e=2),this.setState({graphMode:e,currentCode:void 0})}},{key:"createAlert",value:function(e){this.setState({alert:e})}},{key:"closeAlert",value:function(){this.setState({alert:void 0})}},{key:"turnOff",value:function(e){var t=this.state.display;""==t[e]?t[e]="none":t[e]="",this.setState({display:t})}},{key:"totalPopulation",value:function(){this.turnOff("\u7dcf\u4eba\u53e3")}},{key:"youngPopulation",value:function(){this.turnOff("\u5e74\u5c11\u4eba\u53e3")}},{key:"workingAge",value:function(){this.turnOff("\u751f\u7523\u5e74\u9f62\u4eba\u53e3")}},{key:"oldPopulation",value:function(){this.turnOff("\u8001\u5e74\u4eba\u53e3")}},{key:"render",value:function(){var e=this;return Object(S.jsxs)("div",{style:{marginLeft:"1em",width:"90%",height:"100%"},children:[Object(S.jsx)(l.a,{width:"100%",height:500,children:Object(S.jsxs)(h.a,{data:this.state.data,margin:{top:30,right:30,left:60,bottom:0},children:[Object(S.jsx)(f.a,{dataKey:"year"}),Object(S.jsx)(j.a,{}),Object(S.jsx)(y.a,{}),this.state.keyList.map((function(t){return""==e.state.display[t]?Object(S.jsx)(b.a,{type:"monotone",dataKey:t,stroke:e.state.color[t]},t):null}))]})}),Object(S.jsx)("p",{}),Object(S.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)"},children:[Object(S.jsx)("div",{className:""==this.state.display["\u7dcf\u4eba\u53e3"]?"totalPopulation":"noDisplay",onClick:this.totalPopulation,children:"\u7dcf\u4eba\u53e3"}),Object(S.jsx)("div",{className:""==this.state.display["\u5e74\u5c11\u4eba\u53e3"]?"youngPopulation":"noDisplay",onClick:this.youngPopulation,children:"\u5e74\u5c11\u4eba\u53e3"}),Object(S.jsx)("div",{className:""==this.state.display["\u751f\u7523\u5e74\u9f62\u4eba\u53e3"]?"workingAge":"noDisplay",onClick:this.workingAge,children:"\u751f\u7523\u5e74\u9f62\u4eba\u53e3"}),Object(S.jsx)("div",{className:""==this.state.display["\u8001\u5e74\u4eba\u53e3"]?"oldPopulation":"noDisplay",onClick:this.oldPopulation,children:"\u8001\u5e74\u4eba\u53e3"})]}),Object(S.jsx)("p",{}),Object(S.jsx)("div",{className:"switch",onClick:this.changeMode,children:1==this.state.graphMode?"Prefecture":"City"}),Object(S.jsx)("p",{}),1==this.state.graphMode?Object(S.jsx)(N,{mode:this.state.graphMode,loadData:this.loadData,createAlert:this.createAlert,currentCode:this.state.currentCode}):Object(S.jsx)(E,{loadData:this.loadData,createAlert:this.createAlert,currentCode:this.state.currentCode})]})}}]),a}(r.Component),F=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,354)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,o=t.getLCP,c=t.getTTFB;a(e),r(e),n(e),o(e),c(e)}))};c.a.render(Object(S.jsx)(n.a.StrictMode,{children:Object(S.jsx)(L,{})}),document.getElementById("root")),F()}},[[346,1,2]]]);
//# sourceMappingURL=main.ed5135fe.chunk.js.map