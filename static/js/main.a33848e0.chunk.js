(this["webpackJsonpyumeni-frontend"]=this["webpackJsonpyumeni-frontend"]||[]).push([[0],{117:function(t,e,r){},126:function(t,e,r){},127:function(t,e,r){},189:function(t,e,r){},346:function(t,e,r){"use strict";r.r(e);var a=r(0),n=r.n(a),o=r(63),i=r.n(o),c=(r(189),r(25)),s=r(26),u=r(18),p=r(27),l=r(28),d=(r(117),r(348)),h=r(349),f=r(177),j=r(178),y=r(74),b=r(180),v=r(2),O=r.n(v),C=r(30),g=r.n(C),m=r(71),k=r(162),x=r.n(k).a.create({headers:{"Content-Type":"application/json"}});function A(){return _.apply(this,arguments)}function _(){return(_=Object(m.a)(g.a.mark((function t(){var e;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.get("https://opendata.resas-portal.go.jp/api/v1/prefectures");case 2:return e=t.sent,t.abrupt("return",e.data.result);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function D(){return(D=Object(m.a)(g.a.mark((function t(e){var r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.get("https://opendata.resas-portal.go.jp/api/v1/cities?prefCode="+e);case 2:return r=t.sent,t.abrupt("return",r.data.result);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(){return(w=Object(m.a)(g.a.mark((function t(e){var r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.get("https://opendata.resas-portal.go.jp/api/v1/population/composition/perYear?prefCode="+e);case 2:return r=t.sent,t.abrupt("return",r.data.result.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function P(){return(P=Object(m.a)(g.a.mark((function t(e,r){var a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.get("https://opendata.resas-portal.go.jp/api/v1/population/composition/perYear?prefCode="+e+"&cityCode="+r);case 2:return a=t.sent,t.abrupt("return",a.data.result.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}x.interceptors.request.use((function(t){var e=localStorage.Auth;return t.headers.Authorization=e?"Basic ".concat(e):"",t})),x.defaults.headers.common={"X-API-KEY":"MYRr6MBVsb2ao9OJrS2OjiyoBnP02Slrgl721amA"};r(126);var S=r(7),M=function(t){Object(p.a)(r,t);var e=Object(l.a)(r);function r(t){var a;return Object(c.a)(this,r),(a=e.call(this,t)).state={added:!1,color:"#A8A878",count:0},a.pref=a.props.pref,a.mode=t.mode,a.loadData=t.loadData,a.change_display=a.change_display.bind(Object(u.a)(a)),a.show_population=a.show_population.bind(Object(u.a)(a)),a}return Object(s.a)(r,[{key:"change_display",value:function(t){t.preventDefault(),this.props.onPrefectureSelect(this.pref.prefCode,this.pref.prefName)}},{key:"show_population",value:function(t){var e=this;t.preventDefault();var r=this.props.currentCode;void 0!=r&&r.toString().startsWith(this.pref.prefCode+"_")||function(t){return w.apply(this,arguments)}(this.pref.prefCode).then((function(t){e.props.loadData(t,e.pref.prefCode+"_")})).catch((function(t){return e.props.createAlert(t)}))}},{key:"render",value:function(){var t=this.props.currentCode,e=void 0!=t&&t.toString().startsWith(this.pref.prefCode+"_")?"#4924A1":"#A8A878";return Object(S.jsx)("div",{className:"prefBox",style:{backgroundColor:e},onClick:2==this.mode?this.change_display:this.show_population,children:this.pref.prefName})}}],[{key:"propTypes",get:function(){return{pref:O.a.any,mode:O.a.any,currentCode:O.a.any,loadData:O.a.func,createAlert:O.a.func,onPrefectureSelect:O.a.func}}}]),r}(a.Component),N=function(t){Object(p.a)(r,t);var e=Object(l.a)(r);function r(t){var a;return Object(c.a)(this,r),(a=e.call(this,t)).state={prefecture_list:[]},a}return Object(s.a)(r,[{key:"componentDidMount",value:function(){var t=this;this._isMounted=!0,A().then((function(e){t.setState({prefecture_list:e})})).catch((function(e){return t.createAlert(e)}))}},{key:"render",value:function(){var t=this;return Object(S.jsx)("div",{className:"prefecture_list",children:this.state.prefecture_list.map((function(e){return Object(S.jsx)(M,{pref:e,loadData:t.props.loadData,createAlert:t.props.createAlert,currentCode:t.props.currentCode},e.prefCode+"_"+t.props.currentCode)}))})}}],[{key:"propTypes",get:function(){return{pref:O.a.any,currentCode:O.a.any,loadData:O.a.func,createAlert:O.a.func}}}]),r}(a.Component),T=function(t){Object(p.a)(r,t);var e=Object(l.a)(r);function r(t){var a;return Object(c.a)(this,r),(a=e.call(this,t)).state={added:!1,color:"#A8A878"},a.show_population=a.show_population.bind(Object(u.a)(a)),a}return Object(s.a)(r,[{key:"show_population",value:function(t){var e=this;t.preventDefault();var r=this.props.currentCode,a=this.props.city.prefCode+"_"+this.props.city.cityCode;void 0!=r&&r==a||function(t,e){return P.apply(this,arguments)}(this.props.city.prefCode,this.props.city.cityCode).then((function(t){e.props.loadData(t,e.props.city.prefCode+"_"+e.props.city.cityCode)})).catch((function(t){return e.props.createAlert(t)}))}},{key:"render",value:function(){var t=this.props.currentCode,e=this.props.city.prefCode+"_"+this.props.city.cityCode,r=void 0!=t&&t==e?"#4924A1":"#A8A878";return Object(S.jsxs)("div",{style:{borderRadius:"25px",border:"5px solid #6D6D4E",backgroundColor:r,color:"white"},children:[Object(S.jsx)("p",{}),Object(S.jsx)("div",{onClick:this.show_population,align:"center",className:"cityBox",children:this.props.city.cityName}),Object(S.jsx)("p",{})]})}}],[{key:"propTypes",get:function(){return{city:O.a.any,currentCode:O.a.any,loadData:O.a.func,createAlert:O.a.func}}}]),r}(a.Component),B=(r(127),function(t){Object(p.a)(r,t);var e=Object(l.a)(r);function r(t){var a;return Object(c.a)(this,r),(a=e.call(this,t)).state={cities:[]},a}return Object(s.a)(r,[{key:"componentDidMount",value:function(){var t=this;this._isMounted=!0,function(t){return D.apply(this,arguments)}(this.props.prefCode).then((function(e){t.setState({cities:e})})).catch((function(e){return t.props.createAlert(e)}))}},{key:"render",value:function(){var t=this;return Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{className:"header",children:this.props.prefName}),Object(S.jsx)("div",{className:"cityList",children:this.state.cities.map((function(e){return Object(S.jsx)(T,{city:e,loadData:t.props.loadData,createAlert:t.props.createAlert,currentCode:t.props.currentCode},e.prefCode+"_"+e.cityCode+"_"+t.props.currentCode)}))})]})}}],[{key:"propTypes",get:function(){return{prefName:O.a.any,prefCode:O.a.any,currentCode:O.a.any,loadData:O.a.func,createAlert:O.a.func}}}]),r}(a.Component)),L=function(t){Object(p.a)(r,t);var e=Object(l.a)(r);function r(t){var a;return Object(c.a)(this,r),(a=e.call(this,t)).state={prefecture_list:[],rendered:[],selected:void 0,count:{},prefName:void 0},a.onPrefectureSelect=a.onPrefectureSelect.bind(Object(u.a)(a)),a}return Object(s.a)(r,[{key:"componentDidMount",value:function(){var t=this;this._isMounted=!0,A().then((function(e){t.setState({prefecture_list:e})})).catch((function(e){return t.createAlert(e)}))}},{key:"onPrefectureSelect",value:function(t,e){var r=this.state.rendered,a=this.state.count;-1==r.indexOf(t)&&(r.push(t),a[t]=0),this.setState({rendered:r,selected:t,prefName:e})}},{key:"render",value:function(){var t=this;return Object(S.jsxs)("div",{id:"city_page",children:[Object(S.jsx)("div",{id:"city_page_left",children:this.state.prefecture_list.map((function(e){return Object(S.jsx)(M,{currentCode:t.props.currentCode,pref:e,onPrefectureSelect:t.onPrefectureSelect,mode:2},"2_"+e.prefCode)}))}),Object(S.jsx)("div",{id:"city_page_right",children:void 0==this.state.selected?null:Object(S.jsx)("div",{children:Object(S.jsx)(B,{prefCode:this.state.selected,loadData:this.props.loadData,createAlert:this.props.createAlert,currentCode:this.props.currentCode,prefName:this.state.prefName})},this.state.selected+"_city")})]})}}],[{key:"propTypes",get:function(){return{currentCode:O.a.any,loadData:O.a.func,createAlert:O.a.func}}}]),r}(a.Component),E=function(t){Object(p.a)(r,t);var e=Object(l.a)(r);function r(t){var a;return Object(c.a)(this,r),(a=e.call(this,t)).state={graphMode:1,data:[],keyList:["\u7dcf\u4eba\u53e3","\u5e74\u5c11\u4eba\u53e3","\u751f\u7523\u5e74\u9f62\u4eba\u53e3","\u8001\u5e74\u4eba\u53e3"],color:{"\u7dcf\u4eba\u53e3":"#6D5E9C","\u5e74\u5c11\u4eba\u53e3":"#2C2C2C","\u751f\u7523\u5e74\u9f62\u4eba\u53e3":"#7D1F1A","\u8001\u5e74\u4eba\u53e3":"#4E8234"},display:{"\u7dcf\u4eba\u53e3":"","\u5e74\u5c11\u4eba\u53e3":"","\u751f\u7523\u5e74\u9f62\u4eba\u53e3":"","\u8001\u5e74\u4eba\u53e3":""},currentCode:void 0},a.loadData=a.loadData.bind(Object(u.a)(a)),a.changeMode=a.changeMode.bind(Object(u.a)(a)),a.createAlert=a.createAlert.bind(Object(u.a)(a)),a.closeAlert=a.closeAlert.bind(Object(u.a)(a)),a.turnOff=a.turnOff.bind(Object(u.a)(a)),a.totalPopulation=a.totalPopulation.bind(Object(u.a)(a)),a.youngPopulation=a.youngPopulation.bind(Object(u.a)(a)),a.workingAge=a.workingAge.bind(Object(u.a)(a)),a.oldPopulation=a.oldPopulation.bind(Object(u.a)(a)),a}return Object(s.a)(r,[{key:"loadData",value:function(t,e){for(var r=[],a=0;a<t[0].data.length;a++)r.push({year:t[0].data[a].year});for(var n=0;n<t.length;n++)for(var o=t[n].data,i=0;i<o.length;i++)for(var c=0;c<r.length;c++)o[i].year==r[c].year&&(r[c][t[n].label]=o[i].value);this.setState({data:r,currentCode:e})}},{key:"changeMode",value:function(){var t=1;1==this.state.graphMode&&(t=2),this.setState({graphMode:t,currentCode:void 0})}},{key:"createAlert",value:function(t){this.setState({alert:t})}},{key:"closeAlert",value:function(){this.setState({alert:void 0})}},{key:"turnOff",value:function(t){var e=this.state.display;""==e[t]?e[t]="none":e[t]="",this.setState({display:e})}},{key:"totalPopulation",value:function(){this.turnOff("\u7dcf\u4eba\u53e3")}},{key:"youngPopulation",value:function(){this.turnOff("\u5e74\u5c11\u4eba\u53e3")}},{key:"workingAge",value:function(){this.turnOff("\u751f\u7523\u5e74\u9f62\u4eba\u53e3")}},{key:"oldPopulation",value:function(){this.turnOff("\u8001\u5e74\u4eba\u53e3")}},{key:"render",value:function(){var t=this;return Object(S.jsxs)("div",{style:{marginLeft:"1em",width:"90%",height:"100%"},children:[Object(S.jsx)(d.a,{width:"100%",height:window.screen.height/2,children:Object(S.jsxs)(h.a,{data:this.state.data,margin:{top:30,right:30,left:60,bottom:0},children:[Object(S.jsx)(f.a,{dataKey:"year"}),Object(S.jsx)(j.a,{}),Object(S.jsx)(y.a,{}),this.state.keyList.map((function(e){return""==t.state.display[e]?Object(S.jsx)(b.a,{type:"monotone",dataKey:e,stroke:t.state.color[e]},e):null}))]})}),Object(S.jsx)("p",{}),Object(S.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)"},children:[Object(S.jsx)("div",{className:""==this.state.display["\u7dcf\u4eba\u53e3"]?"totalPopulation":"noDisplay",onClick:this.totalPopulation,children:"\u7dcf\u4eba\u53e3"}),Object(S.jsx)("div",{className:""==this.state.display["\u5e74\u5c11\u4eba\u53e3"]?"youngPopulation":"noDisplay",onClick:this.youngPopulation,children:"\u5e74\u5c11\u4eba\u53e3"}),Object(S.jsx)("div",{className:""==this.state.display["\u751f\u7523\u5e74\u9f62\u4eba\u53e3"]?"workingAge":"noDisplay",onClick:this.workingAge,children:"\u751f\u7523\u5e74\u9f62\u4eba\u53e3"}),Object(S.jsx)("div",{className:""==this.state.display["\u8001\u5e74\u4eba\u53e3"]?"oldPopulation":"noDisplay",onClick:this.oldPopulation,children:"\u8001\u5e74\u4eba\u53e3"})]}),Object(S.jsx)("p",{}),Object(S.jsx)("div",{className:"switch",onClick:this.changeMode,children:1==this.state.graphMode?"Prefecture":"City"}),Object(S.jsx)("p",{}),1==this.state.graphMode?Object(S.jsx)(N,{mode:this.state.graphMode,loadData:this.loadData,createAlert:this.createAlert,currentCode:this.state.currentCode}):Object(S.jsx)(L,{loadData:this.loadData,createAlert:this.createAlert,currentCode:this.state.currentCode})]})}}]),r}(a.Component),F=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,354)).then((function(e){var r=e.getCLS,a=e.getFID,n=e.getFCP,o=e.getLCP,i=e.getTTFB;r(t),a(t),n(t),o(t),i(t)}))};i.a.render(Object(S.jsx)(n.a.StrictMode,{children:Object(S.jsx)(E,{})}),document.getElementById("root")),F()}},[[346,1,2]]]);
//# sourceMappingURL=main.a33848e0.chunk.js.map